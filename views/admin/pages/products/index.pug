extends ../../layouts/default.pug
include ../../mixins/filter-status.pug
include ../../mixins/form-search.pug
include ../../mixins/pagination.pug
include ../../mixins/card-head.pug
include ../../mixins/action-box.pug
include ../../mixins/alert.pug

block main 
  h1(class="mb-4") Quản lý sản phẩm
  +card-head("Bộ lọc và tìm kiếm")
    .row
      .col-6
        +filter-status(filterStatus)
      .col-6
        +form-search()
  +card-head("Trạng thái")
    +action-box([
      {value: "active", title: "Hoạt động"},
      {value: "inactive", title: "Ngưng hoạt động"},
      {value: "toTrash", title: "Xóa"}
    ])
  +card-head("Danh sách")
    .text-right.mb-3
      a(
        href=`/${prefixAdmin}/products/create`
        class="btn btn-outline-success"
      ) + Thêm mới
    table.table.table-hover.table-sm
      thead 
        tr 
          th 
            input(type="checkbox" name="actionCheckAll")
          th STT
          th Hình ảnh
          th Tiêu đề
          th Giá
          th Trạng thái
          th Hành động
          th Vị trí
      tbody 
        each product, index in products 
          tr(product-id=product.id) 
            td 
              input(type="checkbox" name="actionChecked")
            td #{index + 1}
            td
              .img-box(style="width: 60px; height: 60px;")
                img(
                  class="img-thumbnail"
                  src = product.thumbnail
                  width = "auto"
                  height = "100px"
                ) 
            td #{product.title}
            td #{product.price}
            td 
              input(
              type = "number"
              name = "position"
              value = product.position 
              style="width:60px" 
              min="0")
            td
              if product.status == 'active' 
                button(
                class="badge btn btn-success"
                change-status-btn
                ) Hoạt động 
              else 
                button(
                class="badge btn btn-danger"
                change-status-btn
                ) Ngừng hoạt động 
            td
              button(class="btn btn-info btn-sm" detail) Chi tiết
              button(class="btn btn-warning btn-sm" edit) Sửa
              button(class="btn btn-danger btn-sm" send-to-trash) Xóa
    +pagination(pagination)
  script(type="module" src="/admin/js/productsScript.js")